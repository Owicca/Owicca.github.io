<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="OWicca"><meta name=generator content="Hugo 0.121.2"><title>Javascript — Down the wabbit's hole</title>
<meta name=description content><link rel=canonical href=https://www.dinudev.com/post/javascript/><link href rel=alternate type=application/rss+xml title="Down the wabbit's hole"><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Arvo:400,700"><link rel=stylesheet href=https://www.dinudev.com/css/highlight.css><link rel=stylesheet href=https://www.dinudev.com/css/paperback.css><link rel=stylesheet href=https://www.dinudev.com/css/main.css><link rel=stylesheet href=https://www.dinudev.com/css/tabs.css></head><body><div class=container><header><h1>Javascript</h1><nav class=site-nav><a href=/>Home</a>
<a href=/post/>All posts</a>
<a href=/thoughts/>Thoughts</a>
<a href=/paper/>Papers</a></nav></header><h3>Table of Contents</h3><aside><nav id=TableOfContents><ul><li><ul><li><a href=#node>Node:</a></li><li><a href=#module-systems>Module systems:</a></li><li><a href=#packagejsonhttpsdocsnpmjscomfilespackagejson><a href=https://docs.npmjs.com/files/package.json>package.json</a>:</a></li><li><a href=#the-loop>The loop:</a></li><li><a href=#react>react:</a></li><li><a href=#prototypes>Prototypes:</a></li><li><a href=#object-literal-pattern>object-literal pattern:</a></li><li><a href=#beaconing>beaconing:</a></li><li><a href=#ways-to-communicate-with-something-outside-the-user-agent>ways to communicate with something outside the user-agent:</a></li><li><a href=#how-to-check-if-page-is-visible-on-every-device>how to check if page is visible on every device?</a></li><li><a href=#iterate>iterate:</a></li><li><a href=#browser-list-to-check>browser list to check:</a></li><li><a href=#fetch-api>fetch api:</a></li><li><a href=#primitives>primitives:</a></li><li><a href=#misc>misc:</a></li><li><a href=#firefox-forbidden-request-headers>firefox forbidden request headers:</a></li><li><a href=#firefox-forbidden-response-headers>firefox forbidden response headers:</a></li><li><a href=#to-read>To read:</a></li></ul></li></ul></nav></aside><article><h3 id=node>Node:</h3><ul><li>core packages:<ul><li><code>console</code>(print to stdout/stderr):<ul><li><code>time("label")</code> / <code>timeLog("label")</code> / <code>timeEnd("label")</code>: time spent</li><li><code>error("string")</code> / <code>warn("string")</code>: print to stderr</li><li><code>trace("string")</code>: print string and debug trace to current position in the code</li><li><code>readline</code>(read from stdin line by line):<ul><li>events:<ul><li>&ldquo;close&rdquo;</li><li>&ldquo;line&rdquo;: triggers on &ldquo;\n&rdquo;, &ldquo;\r&rdquo;, &ldquo;\r\n&rdquo;</li></ul></li><li><code>createInstance({input: &lt;input.stream>, output: &lt;output.stream>})</code></li></ul></li></ul></li></ul></li><li>if you have 30 projects that all require package <code>randomPackage</code>, you get 30 copies of <code>randomPackage</code>, one for each node_modules of each project(WTF?!)</li><li>backend web frameworks:<ol><li><a href=https://expressjs.com/>express</a>: for everything</li><li><a href=https://hapi.dev/>hapi</a>: mainly rest apis</li><li><a href=https://socket.io/>socket</a>(it needs a client side module loaded): real-time stuff</li></ol></li><li>automation:<ul><li><a href=https://gulpjs.com>gulp</a>(because of streams and in-memory processing)</li></ul></li><li>bundler:<ul><li><a href=https://webpack.js.org/>webpack</a></li></ul></li><li>server side jquery:<ul><li><a href=https://cheerio.js.org/>cheerio</a></li></ul></li></ul><h3 id=module-systems>Module systems:</h3><ul><li>node(commonjs):<ul><li>under the hood, the content of a js file is wrapped in<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>exports</span>, <span style=color:#a6e22e>require</span>, <span style=color:#a6e22e>module</span>, <span style=color:#a6e22e>__filename</span>, <span style=color:#a6e22e>__dirname</span>) {
</span></span><span style=display:flex><span>  ...<span style=color:#a6e22e>code</span>...
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>someObject</span>
</span></span><span style=display:flex><span>})</span></span></code></pre></div></li><li>ways to export:<ul><li>an object of objects:<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>func</span>(){}
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>CON</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;CONSTANT&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>func</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>CON</span>
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span><span style=color:#75715e>// OR
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span>.<span style=color:#a6e22e>func</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>func</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span>,<span style=color:#a6e22e>CON</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>CON</span>;</span></span></code></pre></div></li></ul></li><li>ways to import:<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>local_name</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;module_name&#34;</span>);</span></span></code></pre></div></li></ul></li><li>browser(es modules):<ul><li>ways to export:<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>func</span>() {}
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>CON</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;CONSTANT&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>func</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// OR
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> {<span style=color:#a6e22e>func</span>, <span style=color:#a6e22e>CON</span>};</span></span></code></pre></div></li><li>ways to import:<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>object</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;module_name&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// OR
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>object</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./module_name.js&#39;</span>;</span></span></code></pre></div></li></ul></li></ul><h3 id=packagejsonhttpsdocsnpmjscomfilespackagejson><a href=https://docs.npmjs.com/files/package.json>package.json</a>:</h3><ul><li>fields:<ul><li><code>private</code>: if set to true, npm will refuse to publish it(safeguard agains unintended publish)</li><li><code>main</code>: entrypoint</li><li><code>engines</code>: what versions of node and npm this package works with</li><li><code>browserlist</code>: what browser versions this package works with</li><li><code>files</code>: a mirrored .gitignore(if its not present, is se to default, &ldquo;[*]&rdquo;, include all)</li><li><code>bin</code>: a map of bin names to entrypoints(on install, npm will symlink the entrypoints to provided node_modules/bin/)</li><li><code>dependencies</code>:<ul><li>&ldquo;1.2.x&rdquo;: 1.2.1, 1.2.2 &mldr; up until but not included 1.3.0</li><li>&ldquo;version1 - version2&rdquo;: same as &ldquo;>=version1 &lt;=version2&rdquo;</li></ul></li></ul></li><li>interesting packages:<ul><li><code>node</code>: install locally a different node binary, sidestepping nvm and other node versioning apps</li></ul></li></ul><h3 id=the-loop>The loop:</h3><ul><li>the loop runs only one thing at a time</li><li>the loop runs things from the call stack(a LIFO)</li><li>a second stack, Message Queue, is lower priority and it gets popped only when the call stack is empty</li><li>the ES6 Job Queue(used in promises) runs things as soon as possible, without adding the thing to the end of the call stack
or the top of the message queue</li><li>helpers:<ul><li><code>process.nextTick(() => {...functions...})</code>:<ul><li>run functions after the current iteration and before the message queue and next iteration</li></ul></li><li><code>setImmediate</code>:<ul><li>run functions on the next iteration</li></ul></li></ul></li></ul><h3 id=react>react:</h3><ul><li>lifecycle phases + hooks:<ul><li>mount:<ul><li>creation: <code>ReactDOM.render()</code></li><li><code>getDefaultProps()</code> / <code>MyComponent.defaultProps</code></li><li><code>getInitialState()</code> / <code>this.state = ...</code></li><li><code>render()</code></li><li>children initialization</li><li><code>componentDidMount()</code></li></ul></li><li>update:<ul><li><code>shouldComponentUpdate()</code></li><li><code>render()</code></li><li>children lifecycle methods</li><li><code>componentDidUpdate()</code></li></ul></li><li>unmount:<ul><li><code>componentWillUnmount()</code></li><li>children lifecycle methods</li><li>instance destroyed for gc</li></ul></li></ul></li></ul><h3 id=prototypes>Prototypes:</h3><ul><li>when objects are created they do not come with the myrad of metadata as inheriting classes in
classical oop do, they are buckets of data, key-value pairs</li><li>how <code>this</code> is resolved:<ul><li>directly: <code>this</code> will refer to the global object, window(browser)/global(nodejs)</li><li>as a method: <code>this</code> will refer to the object that the func is a part of</li><li>explicitly applied:<ul><li><code>call</code>: object to be <code>this</code> as first param, and the rest of the params as positional</li><li><code>apply</code>: object to be <code>this</code> as first param, and the rest of the params as an array in the second param</li><li><code>bind</code>: object to be <code>this</code> as first param</li></ul></li><li>as a constructor</li></ul></li></ul><h3 id=object-literal-pattern>object-literal pattern:</h3><ul><li>organize code by the behaviour it comprises</li><li>keeps your code from polluting the global namespace</li></ul><h3 id=beaconing>beaconing:</h3><ul><li>generate a session and beacon on startup</li><li>beacon specific events in page</li><li>batch the events to reduce cpu usage:<ul><li>handle batch unloading(on page exits)</li></ul></li></ul><h3 id=ways-to-communicate-with-something-outside-the-user-agent>ways to communicate with something outside the user-agent:</h3><ul><li>image:<ul><li>create an img element and set a src:<ul><li>the img will send a get to an url</li><li>the params in the url are customisable</li><li>url limits:<ul><li>max browser url length: 64kb-100kb</li><li>max web server/proxy/cdn url length: 2kb-8kb</li></ul></li></ul></li></ul></li><li>xhr</li><li>fetch</li><li>beacon:<ul><li>payload limits:<ul><li>firefox: none</li><li>chrome: 64kb</li></ul></li><li>url limits:<ul><li>same as image</li></ul></li><li>when triggered it runs out of page</li><li>more reliable</li></ul></li></ul><h3 id=how-to-check-if-page-is-visible-on-every-device>how to check if page is visible on every device?</h3><ul><li>object: <code>document.visibilityState</code></li><li>event: <code>visibilitychange</code></li><li>caveats:<ul><li>on safari(desktop/mobile) also use <code>pagehide</code></li></ul></li></ul><h3 id=iterate>iterate:</h3><ul><li>enumerable string properties: <code>for...in</code></li><li>enumerable values the enumberable object deems enumerable: <code>for...of</code></li></ul><h3 id=browser-list-to-check>browser list to check:</h3><ul><li>chrome: desktop/mobile</li><li>firefox: desktop/mobile</li><li>safari: desktop/mobile</li><li>edge: desktop/mobile</li></ul><h3 id=fetch-api>fetch api:</h3><ul><li><code>resource</code>: a string or a <code>Request</code></li><li><code>options</code>:<ul><li><code>method</code>: &ldquo;GET&rdquo;, &ldquo;POST&rdquo;, etc</li><li><code>headers</code>: an object with string values or <code>Headers</code></li><li><code>body</code>: <code>FormData</code>, any kind of array, <code>URLSearchParams</code>, string object, string or <code>ReadableStream</code></li><li><code>mode</code>: <code>cors</code>, <code>no-cors</code> or <code>same-origin</code></li><li><code>cache</code>: <code>default</code>, <code>no-store</code>, <code>reload</code>, <code>no-cache</code>, <code>force-cache</code> and <code>only-if-cached</code></li><li><code>redirect</code>: how to handle redirects(<code>follow</code>, <code>error</code>, <code>manual</code>)</li><li><code>referrer</code>: string, empty string or <code>about:client</code></li></ul></li></ul><h3 id=primitives>primitives:</h3><ul><li><code>string</code><ul><li>any unicode point between two <code>'</code> or <code>"</code>: <code>\u0065</code></li><li>hexa: <code>\xA9</code></li></ul></li><li><code>number</code>:<ul><li>integer: <code>1234</code></li><li>float: <code>123.44</code></li><li>exponential: <code>1e3</code></li><li>octal: <code>0o777</code></li><li>binary: <code>0b1011</code> / <code>0B1011</code></li><li>hexa: <code>0xFF</code></li></ul></li><li><code>bigint</code>:<ul><li>octal: <code>0o777n</code></li><li>binary: <code>0b1011n</code> / <code>0B1011n</code></li><li>hexa: <code>0xFFn</code></li></ul></li><li><code>boolean</code></li><li><code>undefined</code></li><li><code>null</code></li><li><code>symbol</code></li><li><code>object</code></li></ul><h3 id=misc>misc:</h3><ul><li><code>void (expr) === undefined</code></li><li>use <code>contenteditable="true"</code> on a html tag</li></ul><h3 id=firefox-forbidden-request-headers>firefox forbidden request headers:</h3><ul><li><code>Accept-Charset</code></li><li><code>Accept-Encoding</code></li><li><code>Access-Control-Request-Headers</code></li><li><code>Access-Control-Request-Method</code></li><li><code>Connection</code></li><li><code>Content-Length</code></li><li><code>Cookie</code></li><li><code>Date</code></li><li><code>DNT</code></li><li><code>Expect</code></li><li><code>Feature-Policy</code></li><li><code>Host</code></li><li><code>Keep-Alive</code></li><li><code>Origin</code></li><li><code>Proxy-</code></li><li><code>Sec-</code></li><li><code>Referer</code></li><li><code>TE</code></li><li><code>Trailer</code></li><li><code>Transfer-Encoding</code></li><li><code>Upgrade</code></li><li><code>Via</code></li></ul><h3 id=firefox-forbidden-response-headers>firefox forbidden response headers:</h3><ul><li><code>Set-Cookie</code></li><li><code>Set-Cookie2</code></li></ul><h3 id=to-read>To read:</h3><ul><li><a href=https://github.com/petehunt/react-howto>https://github.com/petehunt/react-howto</a></li><li><a href=https://0fps.net/2013/01/22/commonjs-why-and-how/>https://0fps.net/2013/01/22/commonjs-why-and-how/</a></li><li><a href=https://github.com/withspectrum/spectrum>https://github.com/withspectrum/spectrum</a></li><li><a href=https://github.com/codesandbox/codesandbox-client>https://github.com/codesandbox/codesandbox-client</a></li><li><a href=https://github.com/Automattic/wp-calypso>https://github.com/Automattic/wp-calypso</a></li><li><a href=https://github.com/zeit/next-site>https://github.com/zeit/next-site</a></li><li><a href=https://github.com/fbsamples/f8app>https://github.com/fbsamples/f8app</a></li><li><a href=https://github.com/artsy/force>https://github.com/artsy/force</a></li><li><a href=https://github.com/reactjs/reactjs.org>https://github.com/reactjs/reactjs.org</a></li><li><a href=https://github.com/zesty-io/accounts-ui>https://github.com/zesty-io/accounts-ui</a></li><li><a href=https://github.com/zesty-io/design-system>https://github.com/zesty-io/design-system</a></li><li><a href=https://github.com/devhubapp/devhub>https://github.com/devhubapp/devhub</a></li><li><a href=https://gitlab.com/gnaar/powder>https://gitlab.com/gnaar/powder</a></li><li><a href="https://www.reddit.com/r/reactjs/search?q=flair%3A%22Project+Ideas%22&amp;restrict_sr=on&amp;sort=relevance&amp;t=all">https://www.reddit.com/r/reactjs/search?q=flair%3A%22Project+Ideas%22&amp;restrict_sr=on&amp;sort=relevance&amp;t=all</a></li><li><a href=https://gitlab.cern.ch/nexus-project/nexus-browser>https://gitlab.cern.ch/nexus-project/nexus-browser</a></li><li><a href=https://github.com/BananaBobby/frontmarks>https://github.com/BananaBobby/frontmarks</a></li><li><a href=https://github.com/cozuya/secret-hitler>https://github.com/cozuya/secret-hitler</a></li><li><a href=https://github.com/mattermost/mattermost-webapp>https://github.com/mattermost/mattermost-webapp</a></li><li><a href=https://github.com/gothinkster/realworld>https://github.com/gothinkster/realworld</a></li><li><a href=https://www.reddit.com/r/reactjs/comments/dvgnqx/where_to_go_from_here_tired_of_going_through/>https://www.reddit.com/r/reactjs/comments/dvgnqx/where_to_go_from_here_tired_of_going_through/</a></li><li><a href=https://www.reddit.com/r/programming/comments/eng355/goodbye_clean_code/>https://www.reddit.com/r/programming/comments/eng355/goodbye_clean_code/</a></li><li><a href=https://www.reddit.com/r/reactjs/comments/3bsy7w/looking_for_nice_react_codebases/>https://www.reddit.com/r/reactjs/comments/3bsy7w/looking_for_nice_react_codebases/</a></li><li><a href=http://jstherightway.org/#patterns>http://jstherightway.org/#patterns</a></li><li><a href=https://github.com/paldepind/flyd>https://github.com/paldepind/flyd</a></li></ul></article><nav class=site-nav><a href=https://www.dinudev.com//>Home</a>
<a href=https://www.dinudev.com//post/>All posts</a>
<a href=https://www.dinudev.com//thoughts/>Thoughts</a>
<a href=https://www.dinudev.com//paper/>Papers</a>
<a href=https://github.com/Owicca>GitHub</a></nav><footer class=site-footer><span class=owner>©2024 OWicca</span></footer></div><script src=https://www.dinudev.com/js/highlight.pack.js></script><script>hljs.initHighlightingOnLoad()</script><script src=https://www.dinudev.com/js/tabs.js></script></body></html>