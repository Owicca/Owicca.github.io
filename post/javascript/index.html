<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="OWicca"><meta name=generator content="Hugo 0.102.3"><title>Javascript â€” Down the wabbit's hole</title><meta name=description content><link rel=canonical href=https://www.dinudev.com/post/javascript/><link href rel=alternate type=application/rss+xml title="Down the wabbit's hole"><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Arvo:400,700"><link rel=stylesheet href=https://www.dinudev.com/css/highlight.css><link rel=stylesheet href=https://www.dinudev.com/css/paperback.css><link rel=stylesheet href=https://www.dinudev.com/css/main.css></head><body><div class=container><header><h1>Javascript</h1><nav class=site-nav><a href=/>Home</a>
<a href=/post/>All posts</a>
<a href=/journey/>The journey</a>
<a href=/paper/>Papers</a></nav></header><article><h3 id=node>Node:</h3><ul><li>core packages:<ul><li><code>console</code>(print to stdout/stderr):<ul><li><code>time("label")</code> / <code>timeLog("label")</code> / <code>timeEnd("label")</code>: time spent</li><li><code>error("string")</code> / <code>warn("string")</code>: print to stderr</li><li><code>trace("string")</code>: print string and debug trace to current position in the code</li><li><code>readline</code>(read from stdin line by line):<ul><li>events:<ul><li>&ldquo;close&rdquo;</li><li>&ldquo;line&rdquo;: triggers on &ldquo;\n&rdquo;, &ldquo;\r&rdquo;, &ldquo;\r\n&rdquo;</li></ul></li><li><code>createInstance({input: &lt;input.stream>, output: &lt;output.stream>})</code></li></ul></li></ul></li></ul></li><li>if you have 30 projects that all require package <code>randomPackage</code>, you get 30 copies of <code>randomPackage</code>, one for each node_modules of each project(WTF?!)</li><li>backend web frameworks:<ol><li><a href=https://expressjs.com/>express</a>: for everything</li><li><a href=https://hapi.dev/>hapi</a>: mainly rest apis</li><li><a href=https://socket.io/>socket</a>(it needs a client side module loaded): real-time stuff</li></ol></li><li>automation:<ul><li><a href=https://gulpjs.com>gulp</a>(because of streams and in-memory processing)</li></ul></li><li>bundler:<ul><li><a href=https://webpack.js.org/>webpack</a></li></ul></li><li>server side jquery:<ul><li><a href=https://cheerio.js.org/>cheerio</a></li></ul></li></ul><h3 id=module-systems>Module systems:</h3><ul><li>node(commonjs):<ul><li>under the hood, the content of a js file is wrapped in<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>exports</span>, <span style=color:#a6e22e>require</span>, <span style=color:#a6e22e>module</span>, <span style=color:#a6e22e>__filename</span>, <span style=color:#a6e22e>__dirname</span>) {
</span></span><span style=display:flex><span>  ...<span style=color:#a6e22e>code</span>...
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>someObject</span>
</span></span><span style=display:flex><span>})</span></span></code></pre></div></li><li>ways to export:<ul><li>an object of objects:<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>func</span>(){}
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>CON</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;CONSTANT&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>func</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>CON</span>
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span><span style=color:#75715e>// OR
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span>.<span style=color:#a6e22e>func</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>func</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span>,<span style=color:#a6e22e>CON</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>CON</span>;</span></span></code></pre></div></li></ul></li><li>ways to import:<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>local_name</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;module_name&#34;</span>);</span></span></code></pre></div></li></ul></li><li>browser(es modules):<ul><li>ways to export:<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>func</span>() {}
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>CON</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;CONSTANT&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>func</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// OR
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> {<span style=color:#a6e22e>func</span>, <span style=color:#a6e22e>CON</span>};</span></span></code></pre></div></li><li>ways to import:<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>object</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;module_name&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// OR
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>object</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./module_name.js&#39;</span>;</span></span></code></pre></div></li></ul></li></ul><h3 id=packagejsonhttpsdocsnpmjscomfilespackagejson><a href=https://docs.npmjs.com/files/package.json>package.json</a>:</h3><ul><li>fields:<ul><li><code>private</code>: if set to true, npm will refuse to publish it(safeguard agains unintended publish)</li><li><code>main</code>: entrypoint</li><li><code>engines</code>: what versions of node and npm this package works with</li><li><code>browserlist</code>: what browser versions this package works with</li><li><code>files</code>: a mirrored .gitignore(if its not present, is se to default, &ldquo;[*]&rdquo;, include all)</li><li><code>bin</code>: a map of bin names to entrypoints(on install, npm will symlink the entrypoints to provided node_modules/bin/)</li><li><code>dependencies</code>:<ul><li>&ldquo;1.2.x&rdquo;: 1.2.1, 1.2.2 &mldr; up until but not included 1.3.0</li><li>&ldquo;version1 - version2&rdquo;: same as &ldquo;>=version1 &lt;=version2&rdquo;</li></ul></li></ul></li><li>interesting packages:<ul><li><code>node</code>: install locally a different node binary, sidestepping nvm and other node versioning apps</li></ul></li></ul><h3 id=the-loop>The loop:</h3><ul><li>the loop runs only one thing at a time</li><li>the loop runs things from the call stack(a LIFO)</li><li>a second stack, Message Queue, is lower priority and it gets popped only when the call stack is empty</li><li>the ES6 Job Queue(used in promises) runs things as soon as possible, without adding the thing to the end of the call stack
or the top of the message queue</li><li>helpers:<ul><li><code>process.nextTick(() => {...functions...})</code>:<ul><li>run functions after the current iteration and before the message queue and next iteration</li></ul></li><li><code>setImmediate</code>:<ul><li>run functions on the next iteration</li></ul></li></ul></li></ul><h3 id=react>react:</h3><ul><li>lifecycle phases + hooks:<ul><li>mount:<ul><li>creation: <code>ReactDOM.render()</code></li><li><code>getDefaultProps()</code> / <code>MyComponent.defaultProps</code></li><li><code>getInitialState()</code> / <code>this.state = ...</code></li><li><code>render()</code></li><li>children initialization</li><li><code>componentDidMount()</code></li></ul></li><li>update:<ul><li><code>shouldComponentUpdate()</code></li><li><code>render()</code></li><li>children lifecycle methods</li><li><code>componentDidUpdate()</code></li></ul></li><li>unmount:<ul><li><code>componentWillUnmount()</code></li><li>children lifecycle methods</li><li>instance destroyed for gc</li></ul></li></ul></li></ul><h3 id=prototypes>Prototypes:</h3><ul><li>when objects are created they do not come with the myrad of metadata as inheriting classes in
classical oop do, they are buckets of data, key-value pairs</li><li>how <code>this</code> is resolved:<ul><li>directly: <code>this</code> will refer to the global object, window(browser)/global(nodejs)</li><li>as a method: <code>this</code> will refer to the object that the func is a part of</li><li>explicitly applied:<ul><li><code>call</code>: object to be <code>this</code> as first param, and the rest of the params as positional</li><li><code>apply</code>: object to be <code>this</code> as first param, and the rest of the params as an array in the second param</li><li><code>bind</code>: object to be <code>this</code> as first param</li></ul></li><li>as a constructor</li></ul></li></ul><h3 id=object-literal-pattern>object-literal pattern:</h3><ul><li>organize code by the behaviour it comprises</li><li>keeps your code from polluting the global namespace</li></ul><h3 id=to-read>To read:</h3><ul><li><a href=https://github.com/petehunt/react-howto>https://github.com/petehunt/react-howto</a></li><li><a href=https://0fps.net/2013/01/22/commonjs-why-and-how/>https://0fps.net/2013/01/22/commonjs-why-and-how/</a></li><li><a href=https://github.com/withspectrum/spectrum>https://github.com/withspectrum/spectrum</a></li><li><a href=https://github.com/codesandbox/codesandbox-client>https://github.com/codesandbox/codesandbox-client</a></li><li><a href=https://github.com/Automattic/wp-calypso>https://github.com/Automattic/wp-calypso</a></li><li><a href=https://github.com/zeit/next-site>https://github.com/zeit/next-site</a></li><li><a href=https://github.com/fbsamples/f8app>https://github.com/fbsamples/f8app</a></li><li><a href=https://github.com/artsy/force>https://github.com/artsy/force</a></li><li><a href=https://github.com/reactjs/reactjs.org>https://github.com/reactjs/reactjs.org</a></li><li><a href=https://github.com/zesty-io/accounts-ui>https://github.com/zesty-io/accounts-ui</a></li><li><a href=https://github.com/zesty-io/design-system>https://github.com/zesty-io/design-system</a></li><li><a href=https://github.com/devhubapp/devhub>https://github.com/devhubapp/devhub</a></li><li><a href=https://gitlab.com/gnaar/powder>https://gitlab.com/gnaar/powder</a></li><li><a href="https://www.reddit.com/r/reactjs/search?q=flair%3A%22Project+Ideas%22&restrict_sr=on&sort=relevance&t=all">https://www.reddit.com/r/reactjs/search?q=flair%3A%22Project+Ideas%22&restrict_sr=on&sort=relevance&t=all</a></li><li><a href=https://gitlab.cern.ch/nexus-project/nexus-browser>https://gitlab.cern.ch/nexus-project/nexus-browser</a></li><li><a href=https://github.com/BananaBobby/frontmarks>https://github.com/BananaBobby/frontmarks</a></li><li><a href=https://github.com/cozuya/secret-hitler>https://github.com/cozuya/secret-hitler</a></li><li><a href=https://github.com/mattermost/mattermost-webapp>https://github.com/mattermost/mattermost-webapp</a></li><li><a href=https://github.com/gothinkster/realworld>https://github.com/gothinkster/realworld</a></li><li><a href=https://www.reddit.com/r/reactjs/comments/dvgnqx/where_to_go_from_here_tired_of_going_through/>https://www.reddit.com/r/reactjs/comments/dvgnqx/where_to_go_from_here_tired_of_going_through/</a></li><li><a href=https://www.reddit.com/r/programming/comments/eng355/goodbye_clean_code/>https://www.reddit.com/r/programming/comments/eng355/goodbye_clean_code/</a></li><li><a href=https://www.reddit.com/r/reactjs/comments/3bsy7w/looking_for_nice_react_codebases/>https://www.reddit.com/r/reactjs/comments/3bsy7w/looking_for_nice_react_codebases/</a></li><li><a href=http://jstherightway.org/#patterns>http://jstherightway.org/#patterns</a></li><li><a href=https://github.com/paldepind/flyd>https://github.com/paldepind/flyd</a></li></ul></article><nav class=site-nav><a href=https://www.dinudev.com//>Home</a>
<a href=https://www.dinudev.com//post/>All posts</a>
<a href=https://www.dinudev.com//journey/>The journey</a>
<a href=https://www.dinudev.com//paper/>Papers</a>
<a href=https://github.com/Owicca>GitHub</a></nav><footer class=site-footer><span class=owner>Â©2022 OWicca</span></footer></div><script src=https://www.dinudev.com/js/highlight.pack.js></script>
<script>hljs.initHighlightingOnLoad()</script></body></html>