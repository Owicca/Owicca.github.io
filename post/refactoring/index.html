<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="OWicca"><meta name=generator content="Hugo 0.121.2"><title>Refactoring — Down the wabbit's hole</title>
<meta name=description content><link rel=canonical href=https://www.dinudev.com/post/refactoring/><link href rel=alternate type=application/rss+xml title="Down the wabbit's hole"><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Arvo:400,700"><link rel=stylesheet href=https://www.dinudev.com/css/highlight.css><link rel=stylesheet href=https://www.dinudev.com/css/paperback.css><link rel=stylesheet href=https://www.dinudev.com/css/main.css><link rel=stylesheet href=https://www.dinudev.com/css/tabs.css></head><body><div class=container><header><h1>Refactoring</h1><nav class=site-nav><a href=/>Home</a>
<a href=/post/>All posts</a>
<a href=/thoughts/>Thoughts</a>
<a href=/paper/>Papers</a></nav></header><h3>Table of Contents</h3><aside><nav id=TableOfContents><ul><li><ul><li></li><li><a href=#variants-in-a-system-when-making-a-change>variants in a system when making a change:</a></li><li><a href=#risk-mitigation>risk-mitigation:</a></li><li><a href=#feedback>feedback:</a></li><li><a href=#the-legacy-code-dilemma>the legacy code dilemma:</a></li><li><a href=#legacy-code-change>legacy code change:</a></li><li><a href=#seams>seams:</a></li><li><a href=#refactoring-techniques>refactoring techniques:</a></li></ul></li></ul></nav></aside><article><h4 id=reasons-to-change-software>reasons to change software:</h4><ol><li>adding a feature</li><li>fixing a bug</li><li>improving a design</li><li>optimizing resource usage</li></ol><ul><li>when making changes, it is all about behaviour:<ul><li>new behaviour(features)</li><li>changing or removing old behaviour(bugs)</li></ul></li></ul><h3 id=variants-in-a-system-when-making-a-change>variants in a system when making a change:</h3><ul><li><p>structure</p></li><li><p>functionality</p></li><li><p>resource usage</p></li><li><p>when making a change is important to know how much other behaviour is at risk</p></li></ul><h3 id=risk-mitigation>risk-mitigation:</h3><ol><li>what changes do we have to make?</li><li>how will we know that we&rsquo;ve done them correctly?</li><li>how will we know that we haven&rsquo;t broken anything?</li></ol><h3 id=feedback>feedback:</h3><ul><li>system-level regresion tests are good, but often the feedback loop is long</li><li>small, localized tests make the feedback loop short,
allowing us to quickly fix a regresion bug</li></ul><h3 id=the-legacy-code-dilemma>the legacy code dilemma:</h3><ol><li>when we change code, we should have tests in place(see 2)</li><li>to put tests in place, we often have to change code(see 1)</li></ol><h3 id=legacy-code-change>legacy code change:</h3><ol><li>identify change points(16, 17)</li><li>find test points(11, 12)</li><li>break dependencies(23, 9, 10, 22, 7)</li><li>write tests(13)</li><li>make changes and refactor(8, 20, 22)</li></ol><h3 id=seams>seams:</h3><ul><li>a place where you can alter behaviour in your program without editing in that place</li><li>enabling point:<ul><li>a place where you can make the decision to use one behaviour or another</li></ul></li></ul><h3 id=refactoring-techniques>refactoring techniques:</h3><ul><li>dependency-breaking:<ul><li>primitivize parameter(PP):<ul><li>steps:<ol><li>develop an intermediate representation(IR)</li><li>create a free function(FF) that uses that representation to do the job</li><li>call the FF with the IR inside the class method</li></ol></li><li>this does not decouple anything, makes the code more ugly and/or convoluted,
but we just added a test to a previously untested feature</li><li>it is only usefull when we know we will refactor this class,
removing the FF, IR and PP in the process</li></ul></li></ul></li></ul></article><nav class=site-nav><a href=https://www.dinudev.com//>Home</a>
<a href=https://www.dinudev.com//post/>All posts</a>
<a href=https://www.dinudev.com//thoughts/>Thoughts</a>
<a href=https://www.dinudev.com//paper/>Papers</a>
<a href=https://github.com/Owicca>GitHub</a></nav><footer class=site-footer><span class=owner>©2024 OWicca</span></footer></div><script src=https://www.dinudev.com/js/highlight.pack.js></script><script>hljs.initHighlightingOnLoad()</script><script src=https://www.dinudev.com/js/tabs.js></script></body></html>